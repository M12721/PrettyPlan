<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chemical Engineering Study Plan</title>
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="site.webmanifest">
  <style>

    :root {
      --gray-50:  #fafafa;
      --slate-100: #f1f5f9;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-500: #6b7280;
      --gray-600: #4b5563;
      --gray-700: #374151;

      --indigo-100: #e0e7ff;
      --indigo-500: #6366f1;
      --indigo-900: #1e3a8a;
      --purple-600: #8b5cf6;
      --indigo-400-text: #60a5fa;

      --amber-50:   #fffbeb;
      --amber-400:  #f59e0b;
      --emerald-50: #ecfdf5;
      --emerald-400:#34d399;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow-x: hidden; 
      overflow-y: auto;   
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom right, var(--gray-50), var(--slate-100));
    }


    .top-bar {
      /* Full width, horizontally center the content */
      width: 90%;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0;
    }

    /* TITLE: centered left side */
    .title {
      font-size: 1.6rem;
      font-weight: bold;
      background: linear-gradient(to right, var(--indigo-500), var(--purple-600));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      position:relative;
      top: 1.25rem;
      right: 1rem;
    }
    
    .title::after {
      content: "Chemical Engineering 24/25 Plan";
    }

    .legend-bubble {

      position: absolute; 
      top: 1.6rem; 
      right: 1rem;
      z-index: 50;
      
      display: flex;
      align-items: center;
      gap: 1rem;
      background-color: rgba(255,255,255,0.9);
      backdrop-filter: blur(6px);

      border: 1px solid var(--gray-200);
      border-radius: 9999px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);

      padding: 0.75rem 1.5rem;
    }
    .legend-text {
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--gray-600);
    }
    .legend-colors {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.875rem;
      color: var(--gray-600);
    }
    .legend-dot {
      width: 0.75rem;
      height: 0.75rem;
      border-radius: 9999px;
    }
    .dot-amber   { background-color: var(--amber-400); }
    .dot-emerald { background-color: var(--emerald-400); }

    .year-grid {
      width: 90%;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 1.5rem;
      padding-bottom: 2rem; 
      padding-top: 2rem;
    }
    /* or 1200 test then */
    @media (max-width: 950px) {
      .year-grid {
        grid-template-columns: repeat(2, minmax(0,1fr));
      }
    }
    /* or 640 test then */
    @media (max-width: 450px) {
      .year-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 800px) {
      .title::after {
        content: "ChE 24/25 Plan";
      }
    }
    
    
    @media (max-width: 600px) {
      .title::after {
        content: "ChE Plan";
      }
    }
    
    @media (max-width: 510px) {
      .title::after {
        content: "ChE";
      }
      .legend-bubble {
        right: 0rem;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }
    }
    
    @media (max-width: 415px) {
      .title {
        opacity: 0%;
      }
      .legend-bubble {
        right: 0rem;
      }
      .legend-text {
      font-size: 0.8rem;
      }
      .legend-dot {
        height: 0.5rem;
        width: 0.5rem;
      }
      
      .legend-item {
        font-size: 0.8rem;
      }
    }
    

    /* y block styling */
    .year-block {
      background-color: rgba(255,255,255,0.7);
      backdrop-filter: blur(4px);
      border: 1px solid var(--gray-200);
      border-radius: 0.75rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .year-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--gray-700);
      margin-bottom: 0.5rem;
      text-align: center;
    }

    /* Terms stacked */
    .term {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .term-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--gray-600);
      margin-bottom: 0.25rem;
      margin-top: 0.25rem;
    }

    /* 1 column per course */
    .course-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }

    .course-card {
      position: relative;
      border-radius: 0.5rem;
      border: 1px solid var(--gray-100);
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      padding: 0.75rem;
      transition: box-shadow 0.3s, transform 0.3s;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: 5.5rem; 
      cursor: pointer;
    }
    .course-card:hover {
      box-shadow: 0 6px 10px rgba(0,0,0,0.07);
      transform: translateY(-2px);
    }
    .course-code {
      font-size: 0.9rem;
      font-weight: 700;
      color: var(--indigo-900);
      margin-bottom: 4px;
    }
    .course-name {
      font-size: 0.8rem;
      color: var(--gray-600);
      max-width: 120px; 
      overflow-wrap: break-word;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .course-credits {
      position: absolute;
      bottom: 6px;
      right: 8px;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--indigo-400-text);
    }

    /* hovering */
    .bg-indigo-100  { background-color: var(--indigo-100) !important; }
    .ring-2-indigo  { box-shadow: 0 0 0 2px var(--indigo-500) !important; }
    .bg-amber-50    { background-color: var(--amber-50) !important; }
    .ring-2-amber   { box-shadow: 0 0 0 2px var(--amber-400) !important; }
    .bg-emerald-50  { background-color: var(--emerald-50) !important; }
    .ring-2-emerald { box-shadow: 0 0 0 2px var(--emerald-400) !important; }

  </style>
</head>
<body>

<div class="top-bar">
  <h1 class="title"></h1>
  
  <div id="legend" class="legend-bubble hidden">
    <div id="legend-selected" class="legend-text">
      Hover over any course
    </div>
    <div class="legend-colors">
      <div class="legend-item">
        <div class="legend-dot dot-amber"></div>
        <span>Prerequisites: <span id="prereq-count" class="legend-count">0</span></span>
      </div>
      <div class="legend-item">
        <div class="legend-dot dot-emerald"></div>
        <span>Unlocks: <span id="unlock-count" class="legend-count">0</span></span>
      </div>
    </div>
  </div>
</div>

<!-- MAIN CONTENT -->
<div id="app"></div>

<script>
  const courseRelationships = {
    // ----------------
    //     Year 1
    // ----------------
    'ENGL 101': {
      prereqs: [],
      unlocks: ['ENGL 102']
    },
    'ENGL 102': {
      prereqs: ['ENGL 101'],
      unlocks: []
    },
    'MATH 111': {
      prereqs: [],
      unlocks: ['PHYS 121', 'MATH 112', 'CHEM 211']
    },
    'MATH 112': {
      prereqs: ['MATH 111'],
      unlocks: ['MATH 211', 'MATH 231']
    },
    'CHEM 115': {
      prereqs: [],
      unlocks: ['CHEM 116', 'CHEM 211']
    },
    'PHYS 121': {
      prereqs: ['MATH 111'],
      unlocks: ['CHEG 205']
    },
    'CHEM 116': {
      prereqs: ['CHEM 115'],
      unlocks: ['CHEG 205', 'CHEG 350']
    },
    'GENS 101': {
      prereqs: [],
      unlocks: []
    },
    'GENS 100': {
      prereqs: [],
      unlocks: ['GENS 300']
    },
    'HUMA XXX': {
      prereqs: [],
      unlocks: []
    },
  
    // ----------------
    //     Year 2
    // ----------------
    'MATH 231': {
      prereqs: ['MATH 112'],
      unlocks: ['CHEG 213']
    },
    'MATH 211': {
      prereqs: ['MATH 112'],
      unlocks: ['CHEG 312']
    },
    'CHEM 211': {
      prereqs: ['CHEM 115', 'MATH 111'],
      unlocks: ['CHEG 443']
    },
    'CHEG 205': {
      prereqs: ['CHEM 116', 'PHYS 121'],
      unlocks: ['CHEG 230', 'CHEG 210', 'CHEG 232']
    },
    'CHEG 210': {
      prereqs: ['CHEG 205'],
      unlocks: []
    },
    'CHEG 213': {
      prereqs: ['MATH 231'],
      unlocks: ['CHEG 497']
    },
    'COSC 114': {
      prereqs: [],
      unlocks: ['ENGR 202']
    },
    'CHEG 230': {
      prereqs: ['CHEG 205'],
      unlocks: ['CHEG 335', 'CHEG 332']
    },
    'CHEG 232': {
      prereqs: ['CHEG 205'],
      unlocks: ['CHEG 335']
    },
  
    // ----------------
    //     Year 3
    // ----------------
    'BUSS 322': {
      prereqs: [],
      unlocks: []
    },
    'CHEG 324': {
      prereqs: ['CHEG 335'],
      unlocks: ['CHEG 485', 'CHEG 497']
    },
    'CHEG 312': {
      prereqs: ['MATH 211'],
      unlocks: ['CHEG 412']
    },
    'CHEG 350': {
      prereqs: ['CHEM 116'],
      unlocks: []
    },
    'CHEG 332': {
      prereqs: ['CHEG 230'],
      unlocks: ['CHEG 443']
    },
    'ENGR 202': {
      prereqs: ['COSC 114'],
      unlocks: []
    },
    'CHEG 335': {
      prereqs: ['CHEG 230', 'CHEG 232'],
      unlocks: ['CHEG 324']
    },
    'CHEG XXX': {
      prereqs: [],
      unlocks: []
    },
    'GENS 300': {
      prereqs: ['GENS 100'],
      unlocks: ['GENS 400']
    },
    'ESMA 200': {
      prereqs: [],
      unlocks: []
    },
  
    // ----------------
    //     Year 4
    // ----------------
    'CHEG 497': {
      prereqs: ['CHEG 324', 'CHEG 213'],
      unlocks: ['CHEG 498']
    },
    'CHEG 498': {
      prereqs: ['CHEG 497'],
      unlocks: []
    },
    'CHEG 485': {
      prereqs: ['CHEG 324'],
      unlocks: []
    },
    'CHEG 412': {
      prereqs: ['CHEG 443', 'CHEG 312'],
      unlocks: []
    },
    'CHEG 443': {
      prereqs: ['CHEG 332', 'CHEM 211'],
      unlocks: ['CHEG 412']
    },
    'HUMA 105/106': {
      prereqs: [],
      unlocks: []
    },
    'GENS 400': {
      prereqs: ['GENS 300'],
      unlocks: []
    },
    'ENGR 399': {
      prereqs: [],
      unlocks: []
    },
    'BUSS XXX': {
      prereqs: [],
      unlocks: []
    },
    'HUMA 108': {
      prereqs: [],
      unlocks: []
    }
  };
  
  // -----------------------------------------------
  // Full semester-by-semester layout (the curriculum)
  // -----------------------------------------------
  const curriculum = {
    Freshman: {
      Fall: [
        { code: 'ENGL 101', name: 'Academic English I', credits: 3 },
        { code: 'MATH 111', name: 'Calculus I', credits: 4 },
        { code: 'CHEM 115', name: 'General Chemistry I', credits: 4 },
        { code: 'GENS 101', name: 'KU Grand Challenges', credits: 4 },
        { code: 'GENS 100', name: 'Academic Development & Success', credits: 1 }
      ],
      Spring: [
        { code: 'ENGL 102', name: 'Academic English II', credits: 3 },
        { code: 'PHYS 121', name: 'University Physics I', credits: 4 },
        { code: 'MATH 112', name: 'Calculus II', credits: 4 },
        { code: 'CHEM 116', name: 'General Chemistry II', credits: 4 }
      ],
      Summer: [
      ]
    },
  
    Sophomore: {
      Fall: [
        { code: 'COSC 114', name: 'Introduction to Computing using Python', credits: 4 },
        { code: 'HUMA 108', name: 'Arabic and Islamic Heritage', credits: 3 },
        { code: 'MATH 231', name: 'Calculus IIII', credits: 3 },
        { code: 'CHEG 205', name: 'Principles of Chemical Engineering', credits: 3 },
        { code: 'CHEM 211', name: 'Organic Chemistry', credits: 4 }
      ],
      Spring: [
        { code: 'CHEG 230', name: 'Chemical Engineering Thermodynamics I', credits: 3 },
        { code: 'MATH 211', name: 'Differential Equations and Linear Algebra', credits: 4 },
        { code: 'CHEG 213', name: 'Experimental Design', credits: 3 },
        { code: 'CHEG 210', name: 'Introduction to Biochemical Engineering', credits: 3 },
        { code: 'CHEG 232', name: 'Fluid Mechanics', credits: 4 }
      ],
      Summer: [
        { code: 'BUSS XXX', name: 'Any BUSS Elective', credits: 3 }
      ]
    },
  
    Junior: {
      Fall: [
        { code: 'GENS 300', name: 'Career Preparation', credits: 1 },
        { code: 'BUSS 322', name: 'Fundamentals of Innovation & Entrepreneurship', credits: 3 },
        { code: 'CHEG 312', name: 'Numerical Methods for Chemical Engineers', credits: 3 },
        { code: 'CHEG 335', name: 'Heat Transfer', credits: 4 },
        { code: 'CHEG 332', name: 'Chemical Engineering Thermodynamics II', credits: 3 }
      ],
      Spring: [
        { code: 'ENGR 202', name: 'Data Science & Artificial Intelligence', credits: 3 },
        { code: 'ESMA 200', name: 'Engineering Economic Analysis', credits: 3 },
        { code: 'CHEG 350', name: 'Materials Science & Engineering', credits: 3 },
        { code: 'CHEG 324', name: 'Mass Transfer', credits: 3 },
        { code: 'CHEG XXX', name: 'Technical Elective', credits: 3 }
      ],
      Summer: [
        { code: 'ENGR 399', name: 'Engineering Internship', credits: 1 }
      ]
    },
  
    Senior: {
      Fall: [
        { code: 'GENS 400', name: 'Enhancing Employability & Job Readiness', credits: 1 },
        { code: 'CHEG XXX', name: 'Technical Elective', credits: 3 },
        { code: 'CHEG 485', name: 'Separation Processes', credits: 4 },
        { code: 'CHEG 497', name: 'Senior Design Project I', credits: 3 },
        { code: 'CHEG 443', name: 'Reaction Engineering', credits: 4 }
      ],
      Spring: [
        { code: 'HUMA 105/106', name: 'UAE Studies', credits: 3 },
        { code: 'CHEG XXX', name: 'Technical Elective', credits: 3 },
        { code: 'CHEG XXX', name: 'Technical Elective', credits: 3 },
        { code: 'CHEG 498', name: 'Senior Design Project II', credits: 3 },
        { code: 'CHEG 412', name: 'Process Dynamics and Control', credits: 4 }

      ],
      Summer: [
        { code: 'ENGR 399', name: 'Engineering Internship', credits: 1 }
      ]
    }
  };



  let hoveredCode = null;
  let clickedCode = null;

  function renderApp() {
    const app = document.getElementById('app');
    // Clear
    while (app.firstChild) {
      app.removeChild(app.firstChild);
    }

    const yearGrid = document.createElement('div');
    yearGrid.className = "year-grid";
    app.appendChild(yearGrid);

    // MOUSEMOVE => handle hover if not locked
    yearGrid.addEventListener('mousemove', e => {
      if (!clickedCode) {
        const card = e.target.closest('.course-card');
        if (card) {
          const code = card.getAttribute('data-code');
          if (code !== hoveredCode) {
            hoveredCode = code;
            renderApp();
          }
        } else if (hoveredCode) {
          hoveredCode = null;
          renderApp();
        }
      }
    });

    // CLICK to toggle highlight or clear if empty space
    yearGrid.addEventListener('click', e => {
      const card = e.target.closest('.course-card');
      if (card) {
        const code = card.getAttribute('data-code');
        if (clickedCode === code) {
          clickedCode = null;
          hoveredCode = null;
        } else {
          clickedCode = code;
        }
      } else {
        // empty space => clear
        clickedCode = null;
        hoveredCode = null;
      }
      renderApp();
    });

    // Build each year block
    Object.entries(curriculum).forEach(([yearName, terms]) => {
      const yearDiv = document.createElement('div');
      yearDiv.className = "year-block";

      const yearTitle = document.createElement('h2');
      yearTitle.className = "year-title";
      yearTitle.textContent = yearName;
      yearDiv.appendChild(yearTitle);

      // terms
      Object.entries(terms).forEach(([termName, courses]) => {
        const termDiv = document.createElement('div');
        termDiv.className = "term";

        const termTitle = document.createElement('h3');
        termTitle.className = "term-title";
        termTitle.textContent = termName;
        termDiv.appendChild(termTitle);

        const courseGrid = document.createElement('div');
        courseGrid.className = "course-grid";

        courses.forEach(course => {
          const cardDiv = document.createElement('div');
          cardDiv.className = "course-card";
          cardDiv.setAttribute('data-code', course.code);

          const isSelected = getSelectedCode() === course.code;
          const highlightClasses = buildHighlightClasses(course.code, isSelected);
          highlightClasses.forEach(c => cardDiv.classList.add(c));

          // content
          const codeDiv = document.createElement('div');
          codeDiv.className = "course-code";
          codeDiv.textContent = course.code;

          const nameDiv = document.createElement('div');
          nameDiv.className = "course-name";
          nameDiv.textContent = course.name;

          const creditsDiv = document.createElement('div');
          creditsDiv.className = "course-credits";
          creditsDiv.textContent = course.credits + "cr";

          cardDiv.appendChild(codeDiv);
          cardDiv.appendChild(nameDiv);
          cardDiv.appendChild(creditsDiv);

          courseGrid.appendChild(cardDiv);
        });

        termDiv.appendChild(courseGrid);
        yearDiv.appendChild(termDiv);
      });

      yearGrid.appendChild(yearDiv);
    });

    updateLegend();
  }

  function getSelectedCode() {
    return clickedCode || hoveredCode;
  }

  function buildHighlightClasses(courseCode, isSelected) {
    const classes = ["bg-white"];
    const sc = getSelectedCode();
    if (sc) {
      if (isSelected) {
        classes.push("bg-indigo-100", "ring-2-indigo");
      } else if (courseRelationships[sc]) {
        const { prereqs, unlocks } = courseRelationships[sc];
        if (prereqs.includes(courseCode)) {
          classes.push("bg-amber-50", "ring-2-amber");
        } else if (unlocks.includes(courseCode)) {
          classes.push("bg-emerald-50", "ring-2-emerald");
        }
      }
    }
    return classes;
  }

    function updateLegend() {
      const legend = document.getElementById('legend');
      const legendSelected = document.getElementById('legend-selected');
      const prereqCountSpan = document.getElementById('prereq-count');
      const unlockCountSpan = document.getElementById('unlock-count');
      const sc = getSelectedCode();
      
      if (sc && courseRelationships[sc]) { // Ensure the course exists in relationships
        const prereqCount = courseRelationships[sc].prereqs.length;
        const unlockCount = courseRelationships[sc].unlocks.length;
        
        legendSelected.textContent = `Selected: ${sc}`;
        prereqCountSpan.textContent = prereqCount;
        unlockCountSpan.textContent = unlockCount;
      } else {
        legendSelected.textContent = "Hover over any course";
        prereqCountSpan.textContent = '0';
        unlockCountSpan.textContent = '0';
      }
      
      // Show the legend
      legend.classList.remove('hidden');
    }

  // Initial
  renderApp();
</script>
</body>
</html>

